# Playwright Codegen Recordings

This directory contains recordings generated by the Playwright Codegen recorder.

## File Structure

Each recording session generates three files:

1. **`{sessionId}-recording.spec.ts`** - The generated Playwright test file
2. **`{sessionId}-success-state.png`** - Screenshot of the success state
3. **`{sessionId}-metadata.json`** - Recording metadata and session information

## Generated Test Files

The generated test files follow this structure:

```typescript
import { test, expect } from '@playwright/test';

test('recorded flow - {sessionId}', async ({ page }) => {
  // Navigate to the starting URL
  await page.goto('https://example.com');
  
  // Wait for page to load completely
  await page.waitForLoadState('networkidle');
  
  // Recorded interactions will be inserted here
  // The trace file contains all user interactions
  
  // Verification and assertions
  await expect(page).toHaveURL(/https:\/\/example\.com/);
});
```

## How to Use

### Starting a Recording

Use the IPC handler to start a codegen recording:

```typescript
// From renderer process
const result = await window.electronAPI.invoke('start-codegen-recording');
if (result.success) {
  console.log('Recording started:', result.data.sessionId);
}
```

### Stopping a Recording

```typescript
// From renderer process
const result = await window.electronAPI.invoke('stop-codegen-recording');
if (result.success) {
  console.log('Spec file:', result.data.specFilePath);
  console.log('Screenshot:', result.data.screenshotPath);
  console.log('Metadata:', result.data.metadataPath);
}
```

### Checking Recording Status

```typescript
// From renderer process
const status = await window.electronAPI.invoke('codegen-recording-status');
console.log('Is recording:', status.data.isRecording);
```

## Running Generated Tests

To run a generated test:

```bash
npx playwright test recordings/{sessionId}-recording.spec.ts
```

## Viewing Traces

Each recording generates a trace file that can be viewed with:

```bash
npx playwright show-trace recordings/{sessionId}-trace.zip
```

## Features

- **Real Browser Recording**: Uses Playwright's browser automation
- **Trace Generation**: Creates detailed trace files for debugging
- **Success State Capture**: Automatically captures success state screenshot
- **Metadata Tracking**: Comprehensive session information
- **Test Code Generation**: Generates proper Playwright test structure

## Implementation Details

The codegen recorder uses:

- Playwright's chromium browser in non-headless mode
- Trace recording for capturing all interactions
- Full page screenshots for success state capture
- JSON metadata for session tracking

## Error Handling

If recording fails, fallback code is generated with basic structure and comments indicating the issue.

## File Naming Convention

- Session IDs use timestamp-based naming: `codegen-{timestamp}`
- All files include the session ID for easy correlation
- Metadata includes human-readable timestamps